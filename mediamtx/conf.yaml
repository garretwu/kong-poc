# MediaMTX 配置文件
# 轻量级媒体服务器，RTSP -> HTTP-FLV 转换

# 网络配置
rtmp: off                  # 关闭 RTMP
rtsp: on                   # 开启 RTSP 接收
webRTC: off                # 关闭 WebRTC (由 Kong 处理)
hls: off                   # 关闭 HLS
mpegTs: off                # 关闭 MPEG-TS
webSocket: on              # 开启 WebSocket
flv: on                    # 开启 FLV

# HTTP/HTTPS 服务器配置
http:
  port: 8080
  readTimeout: 10s
  writeTimeout: 10s
  idleTimeout: 60s
  allowedOrigins: "*"

# RTSP 服务器配置
rtsp:
  port: 8554
  allowedPublishers: "*"
  allowedReaders: "*"
  # 禁用素所有路径，允许 PTZ 控制
  defaultAction: none

# 路径配置
paths:
  # 摄像头推流路径配置
  camera:
    # 源地址 (可留空，由外部推流)
    source: ""
    # 协议转换：RTSP -> FLV
    runOnInit: ""
    # 禁用自动推流
    runOnReady: ""
    # 录制配置 (禁用)
    record: off
    # 录制路径
    recordPath: ""
    # 录制格式
    recordFormat: mp4
    # 录制持续时间
    recordDuration: 1h
    # 录制修剪
    recordTruncate: off
    # 录制保留数
    recordKeep: 0

# Metrics 配置 (可选)
metrics:
  on: true
  port: 9998

# 日志配置
log:
  level: info
  format: json

# API 配置 (用于管理)
api: on
apiPort: 9997
